@model IEnumerable<User>
@{
    ViewData["Title"] = "Lista użytkowników";
}


<link rel="stylesheet" type="text/css" href="~/css/Customer/index.css" />


<h1 class="display-4">Lista użytkowników</h1>
<hr />
<br />



<table class="table table-hover">
    <thead>
        <tr>
            <th scope="col">Login</th>
            <th scope="col">Imię i Nazwisko</th>
            <th scope="col">Edycja</th>
            <th scope="col">Usuń</th>
        </tr>
    </thead>
    <tbody>
    @foreach (var user in Model)
    {

        <tr id="@user.Id">
            <td>
                @Html.ActionLink(@user.UserName, "Details", "Administration", new { Id = user.Id})
            </td>
            <td>@user.FirstName @Html.DisplayText(" ") @user.LastName</td>
            <td>
                @Html.ActionLink("Edytuj", "EditUser",
                    "Administration", new { Id = user.Id })
            </td>
            <td>
                <button data-user-id="@user.Id" type="button" class="btn btn-danger btn-sm js-delete-user">Usuń</button>
            </td>
        </tr>
    }

    </tbody>
</table>


@section scripts
{

    <script>

        $(document).ready(function() {
            $(".js-delete-user").click(function(e) {
                var button = $(e.target);
                var id = button.attr("data-user-id");
                $.ajax({
                    url: '/api/account/'.concat(id),
                    type: 'DELETE',
                    success: function (response) {
                        $("#".concat(id)).fadeOut();
                    }
                });
            });
        });


    </script>

}